# üöö‚ÄØTracking‚ÄØService

–£—á–µ–±–Ω—ã–π backend‚Äë–ø—Ä–æ–µ–∫—Ç –Ω–∞  **Go** , –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–π —á–∏—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å–µ—Ä–≤–∏—Å–∞ –∫—É—Ä—å–µ—Ä—Å–∫–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏. –°—Ç–µ–∫: PostgreSQL‚ÄØ+‚ÄØPostGIS, Gin, zap, Docker.

---

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ì—Ä—É–ø–ø–∞                   | –°—Ç–µ–∫                                            |
| ------------------------------ | --------------------------------------------------- |
| –Ø–∑—ã–∫                       | **Go 1.23.1**(darwin/arm64)                   |
| –í–µ–±‚Äë—Ñ—Ä–µ–π–º–≤–æ—Ä–∫     | **Gin**                                       |
| –ë–∞–∑–∞                       | **PostgreSQL 15.4**+**PostGIS 3.3.4**   |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ         | **uber‚Äëzap**(JSON)                           |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API   | **swaggo/swag**‚Üí Swagger UI `/docs/`       |
| –¢–µ—Å—Ç—ã                     | `testing`, **dockertest** ,**GoMock** |
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è | **Docker 28.0.1** ,`docker‚Äëcompose`        |

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
entity ‚Üí repository ‚Üí service ‚Üí controller (Gin) ‚Üí REST
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/<you>/tracking_service.git
cd tracking_service/backend

# –ü–æ–¥—Ç—è–≥–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
go mod tidy

# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker compose build app

# –ó–∞–ø—É—Å–∫ —Å—Ç–µ–∫–∞ (Postgres + –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
docker compose up -d

# Health-check
curl http://localhost:8080/health    # {"status":"ok"}
```

*–ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ë–î.*

---

## ‚úÖ –¢–µ—Å—Ç—ã –∏ –º–æ–∫–∏

| –ß—Ç–æ                        | –ö–æ–º–∞–Ω–¥–∞                                                      |
| ----------------------------- | ------------------------------------------------------------------- |
| Unit‚Äë—Ç–µ—Å—Ç—ã              | `go test ./tests/unit -v`                                         |
| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ  | `go test ./tests/integration -tags=integration -v -timeout 10m`   |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–æ–∫–æ–≤ | `go install go.uber.org/mock/mockgen@latest && go generate ./...` |

---

## üìö –Æ–∑–∫–µ–π—Å—ã

| –ê–∫—Ç—ë—Ä   | –°—Ü–µ–Ω–∞—Ä–∏–π                                                                                                | –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã                                                       |
| ------------ | --------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------ |
| –ö–ª–∏–µ–Ω—Ç | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí –õ–æ–≥–∏–Ω ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞        | `/register`,`/login`,`POST /orders`,`GET /orders/{id}`           |
| –ö—É—Ä—å–µ—Ä | –õ–æ–≥–∏–Ω ‚Üí –ü—Ä–∏–Ω—è—Ç—å –∑–∞–∫–∞–∑ ‚Üí –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å ‚Üí –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç | `/login`,`PUT /couriers/{id}/status`,`PUT /couriers/{id}/location` |
| –ê–¥–º–∏–Ω   | CRUD –∫—É—Ä—å–µ—Ä–æ–≤, –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–∫–∞–∑–æ–≤                                                          | `/couriers/*`,`/orders/*`                                            |

---

## üåê –ü–æ–ª–Ω—ã–π‚ÄØREST API

> –í—Å–µ –æ—Ç–≤–µ—Ç—ã ‚Äî `application/json`; –¥–∞—Ç—ã –≤ RFC‚ÄØ3339. –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç `Authorization: Bearer <JWT>`.

### –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–∫–∏

```json
{ "error": "not_found", "message": "order not found" }
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

| –ú–µ—Ç–æ–¥ | URL           | –ö–æ–¥ | –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞                                              | –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞                          |
| ---------- | ------------- | ------ | -------------------------------------------------------------------- | ---------------------------------------------- |
| POST       | `/register` | 201    | `{ "email":"‚Ä¶", "password":"‚Ä¶", "role":"CLIENT\|COURIER\|ADMIN" }` | `{ "id":"uuid", "email":"‚Ä¶", "role":"‚Ä¶" }` |
| POST       | `/login`    | 200    | `{ "email":"‚Ä¶", "password":"‚Ä¶" }`                                | `{ "token":"jwt" }`                          |

### –ó–∞–∫–∞–∑—ã

| –ú–µ—Ç–æ–¥ | URL              | –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ                                       |
| ---------- | ---------------- | ------ | ------------------------------------------------------ |
| GET        | `/orders`      | 200    | –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ (ADMIN)                    |
| POST       | `/orders`      | 201    | –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ (CLIENT)                     |
| GET        | `/orders/{id}` | 200    | –ü–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑                            |
| PUT        | `/orders/{id}` | 200    | –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–∫–∞–∑ (—Å—Ç–∞—Ç—É—Å `CREATED`) |
| DELETE     | `/orders/{id}` | 200    | –£–¥–∞–ª–∏—Ç—å –∑–∞–∫–∞–∑ (—Å—Ç–∞—Ç—É—Å `CREATED`)   |

```json
{
  "client_id": "uuid",
  "delivery_address": "string",
  "delivery_coords": "<lat>,<lon>",
  "status": "CREATED | ASSIGNED | IN_TRANSIT | DELIVERED | CANCELED"
}
```

### –ö—É—Ä—å–µ—Ä—ã

| –ú–µ—Ç–æ–¥ | URL                                                             | –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ                                             |
| ---------- | --------------------------------------------------------------- | ------ | ------------------------------------------------------------ |
| GET        | `/couriers/nearest?latitude={lat}&longitude={lon}&radius={m}` | 200    | –ë–ª–∏–∂–∞–π—à–∏–µ —Å–≤–æ–±–æ–¥–Ω—ã–µ –∫—É—Ä—å–µ—Ä—ã         |
| GET        | `/couriers/{id}`                                              | 200    | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫—É—Ä—å–µ—Ä–µ (ADMIN)               |
| PUT        | `/couriers/{id}/status`                                       | 200    | –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å `AVAILABLE \| BUSY \| OFFLINE` |
| PUT        | `/couriers/{id}/location`                                     | 200    | –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã                        |

### –°–∏—Å—Ç–µ–º–Ω—ã–µ

| –ú–µ—Ç–æ–¥ | URL         | –ö–æ–¥ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                 |
| ---------- | ----------- | ------ | ---------------------------------------------------- |
| GET        | `/health` | 200    | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ |

---

## üõ†Ô∏è –í–µ—Ä—Å–∏–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –í–µ—Ä—Å–∏—è |
| ------------------ | ------------ |
| PostgreSQL         | 15.4         |
| PostGIS            | 3.3.4        |
| Docker Engine      | 28.0.1       |
| Go                 | 1.23.1       |

---



### –ò—Ç–æ–≥–æ–≤—ã–π –Ω–∞–±–æ—Ä –±–∞–ª–ª–æ–≤ 

| –ü—É–Ω–∫—Ç                                                                                         | –ë–∞–ª–ª—ã   | –ü–æ—á–µ–º—É –∑–∞—Å—á–∏—Ç–∞–Ω–æ                                                                                                                                  |
| -------------------------------------------------------------------------------------------------- | ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –¥–µ—Å—è—Ç–∫–∞ (–∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –º–∞–∫—Å–∏–º—É–º 10)** | **10** | README, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤, –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫–∞, —á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–û–û–ü-—Å–ª–æ–∏), unit + integration-—Ç–µ—Å—Ç—ã |
| **REST API (‚â• 4 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)**                                                     | **10** | Gin-—Ä–æ—É—Ç—ã `/register`,`/login`,`/orders/*`,`/couriers/*`                                                                                            |
| **–†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö**                                                  | **10** | PostgreSQL 15 + PostGIS 3.3, –º–∏–≥—Ä–∞—Ü–∏–∏, –∏–Ω–¥–µ–∫—Å—ã GIST                                                                                               |
| **–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π**                                                  | **5**  | `config.Config`+ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`SERVER_PORT`,`DATABASE_URL`,`JWT_SECRET`,`LOG_LEVEL`‚Ä¶)                                     |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**                                                                   | **2**  | zap-middleware c —É—Ä–æ–≤–Ω–µ–º –ª–æ–≥–æ–≤                                                                                                                       |
| **Docker-–æ–±—Ä–∞–∑**                                                                        | **5**  | Multi-stage `Dockerfile`+`docker-compose.yml`                                                                                                                |
